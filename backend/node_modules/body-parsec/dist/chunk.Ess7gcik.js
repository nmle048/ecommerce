// src/index.ts
import {
  parse
} from "querystring";
import {once} from "events";
const parsec = (fn) => async (req, _res) => {
  const body = await once(req, "data").then((data) => {
    return fn(data);
  });
  req.body = body;
  await once(req, "end");
};
const json = () => async (req, _res, next) => {
  await parsec((x) => JSON.parse(x.toString()))(req, _res);
  next == null ? void 0 : next();
};
const raw = () => async (req, _res, next) => {
  await parsec((x) => x)(req, _res);
  next == null ? void 0 : next();
};
const text = () => async (req, _res, next) => {
  await parsec((x) => x.toString())(req, _res);
  next == null ? void 0 : next();
};
const form = () => async (req, _res, next) => {
  await parsec((x) => parse(x.toString()))(req, _res);
  next == null ? void 0 : next();
};

export {
  parsec,
  json,
  raw,
  text,
  form
};
